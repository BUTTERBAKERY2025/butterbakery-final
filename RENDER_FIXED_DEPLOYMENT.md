# دليل النشر المُصحح على Render.com

هذا الدليل يشرح كيفية نشر تطبيق ButterBakery على منصة Render.com بعد إصلاح المشكلات السابقة.

## الملفات المضافة للإصلاح

قمنا بإضافة الملفات التالية لضمان عمل التطبيق على Render.com:

1. **start.js**: نقطة دخول أساسية للتطبيق على Render.com
2. **render.yaml**: ملف تكوين يحدد كيفية بناء وتشغيل التطبيق
3. **Procfile**: ملف يحدد أوامر التشغيل للتطبيق

## خطوات النشر

1. **تحضير المستودع**:
   - تأكد من وجود الملفات الثلاثة المذكورة أعلاه في جذر المشروع
   - تأكد من أن ملف `package.json` يحتوي على `"type": "module"`

2. **ربط المستودع بـ Render.com**:
   - أنشئ حساباً على Render.com إذا لم يكن لديك واحد
   - انقر على "New" ثم اختر "Web Service"
   - اربط حسابك على GitHub واختر المستودع الذي يحتوي على تطبيقك

3. **تكوين الخدمة**:
   - اسم الخدمة: `butterbakery` (أو اسم آخر تفضله)
   - الفرع: `main` (أو الفرع الذي تريد النشر منه)
   - Runtime: `Node`
   - أمر البناء: `npm install` (Render سيقرأ هذا من ملف render.yaml)
   - أمر البدء: `node start.js` (Render سيقرأ هذا من ملف render.yaml)

4. **متغيرات البيئة**:
   - أضف متغير `DATABASE_URL` مع رابط قاعدة بيانات PostgreSQL الخاصة بك
   - أضف أي متغيرات بيئة أخرى مطلوبة للتطبيق

5. **النشر**:
   - انقر على "Create Web Service"
   - انتظر حتى يكتمل النشر

## استكشاف الأخطاء وإصلاحها

إذا واجهت مشكلات بعد النشر، فيمكنك التحقق من:

1. **سجلات التطبيق**: تحقق من سجلات التطبيق في لوحة تحكم Render.com للبحث عن أي أخطاء.

2. **المتغيرات البيئية**: تأكد من تكوين جميع متغيرات البيئة المطلوبة بشكل صحيح.

3. **أوامر البدء**: تأكد من أن أمر البدء في ملف `render.yaml` و `Procfile` متطابقان.

4. **نسخة Node.js**: قد تحتاج إلى تحديد إصدار Node.js المطلوب في ملف `render.yaml`. الإصدار الافتراضي هو 18.12.1.

## ملاحظة حول ملف start.js

تم تصميم ملف `start.js` ليكون بسيطاً ويعمل مع نظام وحدات ES المستخدم في المشروع. يقوم الملف بما يلي:

1. إنشاء خادم Express بسيط
2. توجيه جميع الطلبات إلى ملف index.html
3. عرض معلومات تشخيصية عند بدء التشغيل

هذا يساعد في التأكد من أن الملفات الثابتة (مثل ملفات HTML و CSS و JavaScript) تُعرض بشكل صحيح، بينما يتم التعامل مع API من خلال المسارات المعرفة في التطبيق الرئيسي.

## تحديثات مستقبلية

لتحديث التطبيق، ما عليك سوى دفع التغييرات إلى المستودع، وسيقوم Render.com تلقائياً بإعادة نشر التطبيق إذا كان خيار `autoDeploy` مضبوطاً على `true` في ملف `render.yaml`.