# دليل النشر المحدّث لـ ButterBakery على Render.com

هذا الدليل يشرح الخطوات المحدّثة لنشر تطبيق ButterBakery على منصة Render.com بعد إصلاح المشاكل المتعلقة بإصدار Node.js وتنسيق الوحدات.

## المتطلبات الأساسية

1. حساب على [Render.com](https://render.com)
2. نسخة حديثة من ملفات المشروع بعد الإصلاحات

## ملفات الإعداد المحدّثة

تم تحديث الملفات التالية لضمان التوافق مع Render.com:

1. **start.js**: تم تحويله من وحدات ES إلى CommonJS لضمان التوافق مع Node.js
2. **render.yaml**: تم تحديثه ليدعم إصدار Node.js الأحدث (20.11.0) وربط قاعدة البيانات
3. **render-db-check.js**: تم إضافته للتحقق من اتصال قاعدة البيانات

## خطوات النشر

### 1. إنشاء الخدمة على Render.com

1. قم بتسجيل الدخول إلى حسابك على Render.com
2. انقر على زر "New +" واختر "Blueprint"
3. قم بربط حساب GitHub الخاص بك واختر المستودع الذي يحتوي على المشروع
4. اختر الفرع الذي تريد النشر منه

### 2. التكوين التلقائي

سيقوم Render.com تلقائيًا بقراءة ملف `render.yaml` وإعداد الخدمات المطلوبة:
- خدمة الويب الرئيسية: butterbakery
- قاعدة البيانات: butterbakery-db

### 3. التأكد من صحة المتغيرات البيئية

تأكد من وجود المتغيرات البيئية التالية:
- `NODE_VERSION`: 20.11.0
- `NODE_ENV`: production
- `PORT`: 10000
- `DATABASE_URL`: (سيتم إعداده تلقائيًا من خلال ربط قاعدة البيانات)

### 4. متابعة عملية النشر

1. انتظر حتى تكتمل عملية البناء والنشر
2. يمكنك متابعة السجلات (Logs) للتأكد من عدم وجود أخطاء
3. بعد الانتهاء، ستظهر رسالة "Deploy live" وستكون الخدمة متاحة عبر الرابط الذي يوفره Render.com

## استكشاف الأخطاء وإصلاحها

### مشكلة: MODULE_NOT_FOUND (Cannot find module 'start.js')

هذه المشكلة تم إصلاحها من خلال:
1. تحويل ملف `start.js` من وحدات ES إلى CommonJS
2. التأكد من أن ملف `Procfile` يشير إلى `node start.js`

### مشكلة: إصدار Node.js

تم تحديث `render.yaml` ليستخدم إصدار Node.js 20.11.0 بدلاً من 18.12.1 لضمان التوافق مع المكتبات الحديثة.

### مشكلة: الاتصال بقاعدة البيانات

تم إضافة ملف `render-db-check.js` للتحقق من صحة الاتصال بقاعدة البيانات وعرض معلومات مفصلة عن الجداول المتاحة.

## الخطوات التالية

بعد نجاح النشر، يمكنك:

1. الوصول إلى التطبيق عبر الرابط المقدم من Render.com
2. إعداد اسم نطاق مخصص (إذا كنت تستخدم خطة مدفوعة)
3. مراقبة أداء التطبيق من خلال لوحة تحكم Render.com

---

لأي استفسارات أو مشاكل، يرجى الرجوع إلى [وثائق Render.com](https://render.com/docs) أو فتح قضية جديدة في مستودع المشروع.